// Generated by CoffeeScript 1.3.1
(function() {
  var Soda, should, soda, _ref;

  should = require('should');

  _ref = require('../lib/soda-sync'), soda = _ref.soda, Soda = _ref.Soda;

  describe("soda-sync", function() {
    var browser;
    browser = null;
    it("create client", function(done) {
      browser = soda.createClient({
        host: "localhost",
        port: 4444,
        url: "http://www.google.com",
        browser: "firefox",
        mode: 'sync'
      });
      return done();
    });
    describe("step by step run", function() {
      it("open session", function(done) {
        return Soda({
          "with": browser
        }, function() {
          this.session();
          return done();
        });
      });
      it("opens page", function(done) {
        return Soda({
          "with": browser
        }, function() {
          this.open('/');
          return done();
        });
      });
      it("types something", function(done) {
        return Soda({
          "with": browser
        }, function() {
          this.type('q', 'Hello World');
          return done();
        });
      });
      it("clicks button", function(done) {
        return Soda({
          "with": browser
        }, function() {
          this.click('btnG');
          return done();
        });
      });
      it("waits", function(done) {
        return Soda({
          "with": browser
        }, function() {
          this.waitForElementPresent('css=#topstuff');
          return done();
        });
      });
      it("checks title", function(done) {
        return Soda({
          "with": browser
        }, function() {
          this.getTitle().toLowerCase().should.include('hello world');
          return done();
        });
      });
      return it("finishes test", function(done) {
        return Soda({
          "with": browser
        }, function() {
          this.testComplete();
          return done();
        });
      });
    });
    describe("all at once, without passing the browser to 'Soda'", function() {
      return it("should work", function(done) {
        Soda = Soda({
          "with": browser
        });
        return Soda(function() {
          this.session();
          this.open('/');
          this.type('q', 'Hello World');
          this.click('btnG');
          this.waitForElementPresent('css=#topstuff');
          this.getTitle().toLowerCase().should.include('hello world');
          this.testComplete();
          return done();
        });
      });
    });
    return describe("retrieving the current browser in an external function", function() {
      var myOwnGetTitle;
      myOwnGetTitle = function() {
        return soda.current().getTitle().toLowerCase();
      };
      return it("should work", function(done) {
        Soda = Soda({
          "with": browser
        });
        return Soda(function() {
          this.session();
          this.open('/');
          myOwnGetTitle().toLowerCase().should.include('google');
          this.testComplete();
          return done();
        });
      });
    });
  });

}).call(this);
